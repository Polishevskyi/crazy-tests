# Шаги тест кейса

1) Подготовка данных в виде CSV

- генерация данных с параметром - количество строк
- установка конкретных данных (user, date, category, amount)
- подготовка данных большого объёма (100 000+ строк)
- генерация данных с большим количеством уникальных пользователей
- генерация данных с большим количеством категорий
- подготовка данных с ошибками (некорректные данные)
- подготовка данных с потенциальными инъекциями (формулы Excel и т.п.)

2) Запуск скрипта с переданным путем к файлу с транзакциями

- успешный запуск скрипта (exit code 0)
- неуспешный запуск скрипта (exit code 1)
- установка параметра запуска (filePath)
- запуск скрипта с большим файлом
- повторный запуск скрипта с одинаковыми/разными данными
- запуск скрипта с некорректными данными
- запуск скрипта с несуществующим файлом
- запуск скрипта с данными с инъекциями

3) Проверка результата в файле averages.csv

- проверка содержимого файла averages.csv (построчно)
- проверка сообщений ошибок
- измерение времени выполнения скрипта
- проверка, что время не превышает лимит
- проверка, что время превышает лимит
- проверка, что время не растёт экспоненциально
- проверка кода завершения (0/1)
- отсутствие промежуточных файлов после сбоя
- отсутствие потери данных
- отсутствие посторонних или служебных данных в выходном файле
- отсутствие инъекций во входных данных
- проверка понятности и информативности сообщений об ошибках
- проверка логов основных этапов выполнения (наличие/отсутствие, информативность)

BDD - behaviour driven development
given (дано) - when (действие/шаги) - then (проверка результата)

### Тест кейс "2 разных юзера"

given

- установка конкретных данных (user1, date, category, amount1)
- установка конкретных данных (user2, date, category, amount2)

when

- успешный запуск скрипта (exit code 0)

then

- проверка содержимого файла averages.csv (user1, date, category, amount1)
- проверка содержимого файла averages.csv (user2, date, category, amount2)

### Тест кейс "Невалидная дата"

given

- установка конкретных данных (user1, invalid-date, category, amount1)

when

- неуспешный запуск скрипта (exit code 1)

then

- проверка сообщений ошибок (Обнаружена неверная дата)

### Тест кейс "Несуществующий файл"

given

- генерация данных с параметром - количество строк (1)

when

- установка параметра запуска (filePath - несуществующий путь)

then

- проверка сообщений ошибок (файл не найден)

# Негативные нефункциональные тест-кейсы

### Тест-кейс "Скрипт не завершает работу за лимит времени"

given

- подготовка данных большого объёма (100 000+ строк)

when

- запуск скрипта с большим файлом

then

- измерение времени выполнения скрипта
- проверка, что время превышает лимит
- проверка кода завершения (1)
- проверка сообщений об ошибках (таймаут)

### Тест-кейс "Промежуточные файлы после сбоя"

given

- подготовка данных с ошибками (некорректные данные)

when

- запуск скрипта с некорректными данными

then

- проверка кода завершения (1)
- отсутствие промежуточных файлов после сбоя
- проверка сообщений об ошибках (описание сбоя)

### Тест-кейс "Инъекции во входных данных"

given

- подготовка данных с потенциальными инъекциями (формулы Excel и т.п.)

when

- запуск скрипта с этими данными

then

- отсутствие инъекций во входных данных
- отсутствие посторонних или служебных данных в выходном файле

### Тест-кейс "Потеря данных при большом объёме"

given

- подготовка данных большого объёма (100 000+ строк)

when

- запуск скрипта с большим файлом

then

- отсутствие потери данных
- проверка сообщений об ошибках (при наличии)

### Тест-кейс "Непонятное сообщение об ошибке"

given

- запуск скрипта с несуществующим файлом

when

- запуск скрипта с несуществующим файлом

then

- проверка сообщений об ошибках (сообщение не содержит причину)

### Тест-кейс "Нет логирования при ошибке"

given

- подготовка данных с ошибками

when

- запуск скрипта с некорректными данными

then

- проверка логов основных этапов выполнения (отсутствуют или неинформативны)
