# Шаги тест-кейса

1. Подготовка данных (users.txt, logins.csv, banned.json)

- генерация данных с параметром — количество строк
- установка конкретных данных (login, last_login, banned)
- подготовка данных большого объема (100 000+ строк)
- генерация данных с большим количеством уникальных пользователей
- подготовка данных с ошибками (некорректные даты, невалидный JSON)
- подготовка данных с потенциальными инъекциями (формулы Excel и т.п.)

2. Запуск скрипта с переданными путями к файлам

- успешный запуск скрипта (exit code 0)
- неуспешный запуск скрипта (exit code 1)
- запуск скрипта с большим файлом
- повторный запуск скрипта с одинаковыми/разными данными
- запуск скрипта с некорректными данными
- запуск скрипта с несуществующим файлом
- запуск скрипта с данными с инъекциями

3. Проверка результата в файле active_users.csv

- проверка содержимого файла active_users.csv (построчно)
- проверка сообщений об ошибках
- измерение времени выполнения скрипта
- проверка, что время не превышает лимит
- проверка, что время не растет экспоненциально
- проверка кода завершения (0/1)
- отсутствие промежуточных файлов после сбоя
- отсутствие потери данных
- отсутствие посторонних или служебных данных в выходном файле
- отсутствие инъекций во входных данных
- проверка понятности и информативности сообщений об ошибках
- проверка логов основных этапов выполнения (наличие/отсутствие, информативность)

BDD - behaviour driven development
given (дано) - when (действие/шаги) - then (проверка результата)

### Тест-кейс "2 разных пользователя"

given

- установка конкретных данных (user1, last_login1, не забанен)
- установка конкретных данных (user2, last_login2, не забанен)

when

- успешный запуск скрипта (exit code 0)

then

- проверка содержимого файла active_users.csv (user1, last_login1)
- проверка содержимого файла active_users.csv (user2, last_login2)

### Тест-кейс "Некорректная дата"

given

- установка конкретных данных (user1, invalid-date, не забанен)

when

- неуспешный запуск скрипта (exit code 1)

then

- проверка сообщений об ошибках (Обнаружена некорректная дата)

### Тест-кейс "Несуществующий файл"

given

- генерация данных с параметром — количество строк (1)

when

- запуск скрипта с несуществующим путем к файлу

then

- проверка сообщений об ошибках (файл не найден)

# Негативные нефункциональные тест-кейсы

### Тест-кейс "Скрипт не завершает работу за лимит времени"

given

- подготовка данных большого объема (100 000+ строк)

when

- запуск скрипта с большим файлом

then

- измерение времени выполнения скрипта
- проверка, что время превышает лимит
- проверка кода завершения (1)
- проверка сообщений об ошибках (таймаут)

### Тест-кейс "Промежуточные файлы после сбоя"

given

- подготовка данных с ошибками (некорректные данные)

when

- запуск скрипта с некорректными данными

then

- проверка кода завершения (1)
- отсутствие промежуточных файлов после сбоя
- проверка сообщений об ошибках (описание сбоя)

### Тест-кейс "Инъекции во входных данных"

given

- подготовка данных с потенциальными инъекциями (формулы Excel и т.п.)

when

- запуск скрипта с этими данными

then

- отсутствие инъекций во входных данных
- отсутствие посторонних или служебных данных в выходном файле

### Тест-кейс "Потеря данных при большом объеме"

given

- подготовка данных большого объема (100 000+ строк)

when

- запуск скрипта с большим файлом

then

- отсутствие потери данных
- проверка сообщений об ошибках (при наличии)

### Тест-кейс "Непонятное сообщение об ошибке"

given

- запуск скрипта с несуществующим файлом

when

- запуск скрипта с несуществующим файлом

then

- проверка сообщений об ошибках (сообщение не содержит причину)

### Тест-кейс "Нет логирования при ошибке"

given

- подготовка данных с ошибками

when

- запуск скрипта с некорректными данными

then

- проверка логов основных этапов выполнения (отсутствуют или неинформативны)
